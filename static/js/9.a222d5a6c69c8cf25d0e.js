webpackJsonp([9],{cdyo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("OOvn"),s=a("4YfN"),r=a.n(s),l=a("A9zj"),n=a.n(l),c=a("aA9S"),i=a.n(c),d=a("a3Yh"),u=a.n(d),p=a("Ap6m"),m=a("+ThO"),v=(a("/ADh"),{components:{searchForm:p.a,pagination:m.a},data:function(){var e;return{formOptions:[{label:"发送账号",prop:"account",element:"el-input"},{label:"发送类型",prop:"sendType",element:"el-select",options:[{value:"1",label:"验证码"},{value:"2",label:"提醒类"}]},{label:"账号类型",prop:"accountType",element:"el-select",options:[{value:"1",label:"短信"},{value:"2",label:"语音"}]}],modelForm:{account:"",accountPwd:"",sendType:"1",servHost:"",servHostBack1:"",servHostBack2:"",servHostBack3:"",servPath:"",accountType:"1"},psdForm:{oldPwd:"",newPwd:"",confirmPwd:""},rules:{account:[{required:!0,message:"请输入发送账号",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{0,10}$/,message:"支持输入字母和数字",trigger:"blur"}],accountPwd:[{required:!0,message:"请输入账号密码",trigger:"blur"}],sendType:[{required:!0,message:"请选择发送类型",trigger:"change"}],servHost:[{required:!0,message:"请输入服务器主机",trigger:"blur"},{pattern:/^(([a-zA-Z0-9]+(.)){1,})(:)+[0-9]{1,}$/,message:"输入格式有误，请重新输入",trigger:"change"}],servPath:[{required:!0,message:"请输入服务器路径",trigger:"blur"}],accountType:[{required:!0,message:"请选择账号类型",trigger:"change"}]},psdrules:(e={accountPwd:[{required:!0,message:"请输入旧密码!",trigger:"blur"}]},u()(e,"accountPwd",[{required:!0,message:"请输入新密码!",trigger:"blur"}]),u()(e,"accountPwd",[{required:!0,message:"请确认新密码!",trigger:"blur"}]),e),button_loading:!1,dialogType:2,addShow:!1,psdShow:!1,searchForm:{},tableLoading:!1,sendAccount:"",pwdhidden:!1,editload:!1,accountId:"",tableData:[],pages:{page:0,size:10,total:0}}},created:function(){this.getAccountList()},methods:{onSearch:function(e){this.searchForm=i()({},e),this.pages.page=0,this.getAccountList()},changeSize:function(e){this.pages=e,this.getAccountList()},getAccountList:function(e){var t=this;this.tableLoading=!0;var a=i()({},{page:this.pages.page,size:this.pages.size},this.searchForm);Object(o.u)(a).then(function(e){var a=e.data;0==a.subCode&&(t.tableLoading=!1,t.tableData=a.data,t.pages=a.pageInfo)})},editPassword:function(e){this.psdShow=!0,this.sendAccount=e.account,this.accountId=e.accountId},editShow:function(e){var t=this;this.dialogType=2,this.addShow=!0,this.editload=!0,this.pwdhidden=!1,this.accountId=e.accountId;var a={accountId:e.accountId};Object(o.n)(a).then(function(e){var a=e.data;0==a.subCode&&(t.editload=!1,t.modelForm={account:a.data.account,accountPwd:a.data.accountPwd,sendType:String(a.data.sendType),servHost:a.data.servHost,servHostBack1:a.data.servHostBack1,servHostBack2:a.data.servHostBack2,servHostBack3:a.data.servHostBack3,servPath:a.data.servPath,accountType:String(a.data.accountType)})}).catch(function(e){t.editload=!1,t.$message.error(data.message)})},addOrEdit:function(){this.pwdhidden=!0,this.addShow=!0,this.dialogType=1,this.modelForm={account:"",accountPwd:"",sendType:"1",servHost:"",servHostBack1:"",servHostBack2:"",servHostBack3:"",servPath:"",accountType:"1"}},delModel:function(e){var t=this;this.tableLoading=!0;var a={accountId:String(e.accountId)};Object(o.h)(a).then(function(e){0==e.data.subCode&&(t.tableLoading=!1,t.$message.success("删除成功"),t.getAccountList())})},editSure:function(e){var t=this;this.$refs.psdform.validate(function(e){if(e){if(t.psdForm.newPwd!=t.psdForm.confirmPwd)return void t.$message.error("请保持新密码一致");t.button_loading=!0;var a=i()({},t.psdForm);a.accountId=t.accountId,Object(o.m)(a).then(function(e){var a=e.data;0===a.subCode?(t.$message.success("修改密码成功"),t.psdShow=!1,t.button_loading=!1,t.psdForm={oldPwd:"",newPwd:"",confirmPwd:""}):(t.$message.error(a.message),t.button_loading=!1)})}})},consure:function(){var e=this;this.$refs.form.validate(function(t){if(t)if(e.button_loading=!0,1==e.dialogType)Object(o.b)(e.modelForm).then(function(t){var a=t.data;0===a.subCode?(e.$message.success("新增成功"),e.addShow=!1,e.button_loading=!1,e.getAccountList(),e.modelForm={account:"",accountPwd:"",sendType:"1",servHost:"",servHostBack1:"",servHostBack2:"",servHostBack3:"",servPath:"",accountType:"1"}):(e.$message.error(a.message),e.button_loading=!1)});else{var a=i()({},e.modelForm),s=(a.accountPwd,n()(a,["accountPwd"]));s.accountId=e.accountId,Object(o.l)(r()({},s)).then(function(t){var a=t.data;0===a.subCode?(e.$message.success("修改成功"),e.button_loading=!1,e.addShow=!1,e.getAccountList()):500===a.subCode&&(message.error("系统错误"),e.button_loading=!1)}).catch(function(t){e.button_loading=!1})}})}}}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonClass"},[a("searchForm",{attrs:{formOptions:e.formOptions},on:{onSearch:e.onSearch}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{size:"medium",border:"",data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"account",label:"发送账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.account)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sendType",label:"发送类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.sendType?"验证码":"提醒类")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"accountType",label:"账号类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("1"==t.row.accountType?"短信":"语音")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"balance",label:"账号余额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"servHost",label:"服务器主机"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"servHost",label:"服务器路径"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updater",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"status",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{on:{click:function(a){return e.editShow(t.row)}}},[e._v("修改")]),e._v(" "),a("el-popconfirm",{attrs:{title:"是否确定要删除此发送账号?"},on:{onConfirm:function(a){return e.delModel(t.row)}}},[a("el-tag",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除")])],1),e._v(" "),a("el-tag",{on:{click:function(a){return e.editPassword(t.row)}}},[e._v("修改密码")])]}}])})],1),e._v(" "),a("pagination",{attrs:{page:e.pages.page,size:e.pages.size,total:e.pages.total},on:{getPaginationData:e.changeSize}}),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:2==e.dialogType?"修改发送账号":"添加发送账号",visible:e.addShow,top:"5vh",width:"600px"},on:{"update:visible":function(t){e.addShow=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.editload,expression:"editload"}],ref:"form",attrs:{size:"medium",model:e.modelForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{prop:"account",label:"发送账号："}},[a("el-input",{attrs:{clearable:"",maxlength:"10",placeholder:"请输入发送账号，不超过10个字符"},model:{value:e.modelForm.account,callback:function(t){e.$set(e.modelForm,"account","string"==typeof t?t.trim():t)},expression:"modelForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"accountPwd",label:"账号密码："}},[a("el-input",{attrs:{clearable:"",maxlength:"16",type:"password","show-password":"",placeholder:"请输入账号密码，不超过16个字符"},model:{value:e.modelForm.accountPwd,callback:function(t){e.$set(e.modelForm,"accountPwd","string"==typeof t?t.trim():t)},expression:"modelForm.accountPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sendType",label:"发送类型："}},[a("el-select",{staticClass:"width100",attrs:{clearable:""},model:{value:e.modelForm.sendType,callback:function(t){e.$set(e.modelForm,"sendType",t)},expression:"modelForm.sendType"}},[a("el-option",{attrs:{label:"验证码",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"提醒类",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"servHost",label:"服务器主机："}},[a("el-input",{attrs:{clearable:"",maxlength:"25",placeholder:"请输入服务器主机"},model:{value:e.modelForm.servHost,callback:function(t){e.$set(e.modelForm,"servHost","string"==typeof t?t.trim():t)},expression:"modelForm.servHost"}}),e._v(" "),a("p",{staticClass:"tipColor"},[e._v("服务器主机格式如：192.169.3.240:8095")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"servHostBack1",label:"备用主机1："}},[a("el-input",{attrs:{clearable:"",maxlength:"25"},model:{value:e.modelForm.servHostBack1,callback:function(t){e.$set(e.modelForm,"servHostBack1","string"==typeof t?t.trim():t)},expression:"modelForm.servHostBack1"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"servHostBack2",label:"备用主机2："}},[a("el-input",{attrs:{clearable:"",maxlength:"25"},model:{value:e.modelForm.servHostBack2,callback:function(t){e.$set(e.modelForm,"servHostBack2","string"==typeof t?t.trim():t)},expression:"modelForm.servHostBack2"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"servHostBack3",label:"备用主机3："}},[a("el-input",{attrs:{clearable:"",maxlength:"25"},model:{value:e.modelForm.servHostBack3,callback:function(t){e.$set(e.modelForm,"servHostBack3","string"==typeof t?t.trim():t)},expression:"modelForm.servHostBack3"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"servPath",label:"服务器路径："}},[a("el-input",{attrs:{clearable:"",maxlength:"60",placeholder:"请输入服务器路径"},model:{value:e.modelForm.servPath,callback:function(t){e.$set(e.modelForm,"servPath","string"==typeof t?t.trim():t)},expression:"modelForm.servPath"}}),e._v(" "),a("p",{staticClass:"tipColor"},[e._v("服务器路径格式如：/sms/v2/std/")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"accountType",label:"账号类型："}},[a("el-select",{staticClass:"width100",attrs:{clearable:""},model:{value:e.modelForm.accountType,callback:function(t){e.$set(e.modelForm,"accountType",t)},expression:"modelForm.accountType"}},[a("el-option",{attrs:{label:"短信",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"语音",value:"2"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.button_loading,type:"primary"},on:{click:e.consure}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"修改密码",visible:e.psdShow,top:"5vh",width:"600px"},on:{"update:visible":function(t){e.psdShow=t}}},[a("el-form",{ref:"psdform",attrs:{size:"medium",model:e.psdForm,rules:e.psdrules,"label-width":"110px"}},[a("el-form-item",{attrs:{prop:"account",label:"发送账号："}},[a("span",[e._v(e._s(e.sendAccount))])]),e._v(" "),a("el-form-item",{attrs:{prop:"oldPwd",label:"旧密码："}},[a("el-input",{attrs:{clearable:"",maxlength:"16",type:"password","show-password":"",placeholder:"请输入账号密码"},model:{value:e.psdForm.oldPwd,callback:function(t){e.$set(e.psdForm,"oldPwd","string"==typeof t?t.trim():t)},expression:"psdForm.oldPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"newPwd",label:"新密码"}},[a("el-input",{attrs:{clearable:"",maxlength:"16",type:"password","show-password":"",placeholder:"请输入新密码"},model:{value:e.psdForm.newPwd,callback:function(t){e.$set(e.psdForm,"newPwd","string"==typeof t?t.trim():t)},expression:"psdForm.newPwd"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"confirmPwd",label:"确认新密码"}},[a("el-input",{attrs:{clearable:"",maxlength:"16",type:"password","show-password":"",placeholder:"请输入新密码"},model:{value:e.psdForm.confirmPwd,callback:function(t){e.$set(e.psdForm,"confirmPwd","string"==typeof t?t.trim():t)},expression:"psdForm.confirmPwd"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.psdShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.button_loading,type:"primary"},on:{click:e.editSure}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b={components:{accountList:a("C7Lr")(v,g,!1,function(e){a("xt0n")},"data-v-2a5c4332",null).exports},data:function(){return{activeName:"first",formOptions:[{label:"发送账号",prop:"account",element:"el-input"},{label:"发送类型",prop:"sendType",element:"el-select",options:[{value:"1",name:"验证码"},{value:"2",name:"提醒类"}]},{label:"账号类型",prop:"accountType",element:"el-select",options:[{value:"1",name:"短信"},{value:"2",name:"语音"}]}]}},created:function(){},methods:{onSearch:function(){},addNoticeModel:function(){this.$refs.accountChild.addOrEdit()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonClass systemSetting"},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"发送账号管理",name:"first"}},[a("accountList",{ref:"accountChild"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"默认信息配置",name:"second"}},[e._v("默认信息配置")])],1),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"20px",top:"20px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addNoticeModel()}}},[e._v("添加账号")])],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(b,f,!1,function(e){a("wLbh")},"data-v-0cf228f2",null);t.default=h.exports},wLbh:function(e,t){},xt0n:function(e,t){}});