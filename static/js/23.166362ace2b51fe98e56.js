webpackJsonp([23],{O632:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("A9zj"),s=a.n(n),o=a("4YfN"),r=a.n(o),l=a("aA9S"),i=a.n(l),c=a("OOvn"),p=a("Ap6m"),u=a("+ThO"),m={components:{searchForm:p.a,pagination:u.a},data:function(){return{formOptions:[{label:"公司名称",prop:"companyName",element:"el-input"},{label:"服务号名称",prop:"pubName",element:"el-input"},{label:"短信提醒",prop:"smsRemind",element:"el-select",options:[{label:"否",value:"1"},{label:"是",value:"2"}]},{label:"接收时间",prop:"receiveTimes",element:"el-date-picker",type:"daterange"}],searchForm:{},tableLoading:!1,tableData:[],pages:{page:0,size:10,total:0}}},created:function(){this.getMsgsList()},methods:{getMsgsList:function(){var e=this;this.tableLoading=!0;var t=i()({},{page:this.pages.page,size:this.pages.size},this.searchForm);Object(c.z)(r()({},t)).then(function(t){var a=t.data;e.tableLoading=!1,0===a.subCode&&(e.tableData=a.data,e.pages=a.pageInfo)})},onSearch:function(e){var t=e.receiveTimes,a=s()(e,["receiveTimes"]);t&&(a.beginTime=t[0],a.endTime=t[1]),this.pages.page=0,this.searchForm=i()({},a),this.getMsgsList()},changeSize:function(e){this.pages=e,this.getMsgsList()},getReaddata:function(e){var t={isAll:1,msgIds:String(e)};Object(c.J)(t).then(function(e){e.data.subCode})},seedetailShow:function(e){1==e.readState&&this.getReaddata(e.msgId)},getSmsState:function(e){switch(e){case 1:return"失败";case 2:return"成功";case 3:return"未返";default:return"无"}}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonClass systemMessage"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("系统消息")])]),e._v(" "),a("searchForm",{attrs:{formOptions:e.formOptions},on:{onSearch:e.onSearch}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{size:"medium",border:"",data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"msgContent",label:"消息内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.row.msgContent,placement:"top"}},[a("span",[e._v(e._s(t.row.msgContent.length>15?t.row.msgContent.substring(0,14)+"...":t.row.msgContent))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"companyName",label:"公司名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.companyName?t.row.companyName:"-")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"pubName",label:"服务号名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.pubName?t.row.pubName:"-")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"smsRemind",label:"是否需要短信提醒"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s("1"==t.row.smsRemind?"否":"是")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"smsState",label:"短信发送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getSmsState(t.row.smsState))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"接收时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",prop:"status",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{"margin-right":"20px"},attrs:{type:"2"==t.row.readState?"info":""},on:{click:function(a){return e.seedetailShow(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("pagination",{attrs:{page:e.pages.page,size:e.pages.size,total:e.pages.total},on:{getPaginationData:e.changeSize}})],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(m,g,!1,function(e){a("Tz8L")},"data-v-17285962",null);t.default=d.exports},Tz8L:function(e,t){}});